<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.or.profit.mapper.QnaMapper">
    
<!--     vo -->
    <resultMap id="qna" type="kr.or.profit.vo.QnaVO">
        <result property="question_seq" column="question_seq"/>
        <result property="lesson_seq" column="lesson_seq"/>
        <result property="question_del_flag" column="question_del_flag"/>
        <result property="question_del_flag" column="question_del_flag"/>
        <result property="question_parent_seq" column="question_parent_seq"/>        
        <result property="question_depth" column="question_depth"/>        
        <result property="question_secret_flag" column="question_secret_flag"/>        
    </resultMap>  

<!--     참고용 -->
<!--     <select id="selectsuserList" resultType="egovMap"> -->
<!-- 		SELECT  -->
<!-- 			MEMBER_ID, -->
<!-- 			MEMBER_PWD, -->
<!-- 			MEMBER_NAME, -->
<!-- 			MEMBER_NICKNAME, -->
<!-- 			MEMBER_MOBILE, -->
<!-- 			MEMBER_GENDER -->
<!-- 		FROM  -->
<!-- 			MEMBER -->
<!-- 	</select> -->

<!--     lsit -->

<!-- 	문의하기는 community와 함께 사용한다. -->
    <select id="selectQnaList" resultType="egovMap">
		SELECT 
		    B.CNT,
		    A.COMMUNITY_SEQ,
		    A.COMMON_SEQ,
		    A.COMMUNITY_CATEGORY_SEQ,
		    A.COMMUNITY_TITLE,
		    A.COMMUNITY_CONTENT,
		    A.COMMUNITY_HIT,
		    A.COMMUNITY_DEL_FLAG,
		    A.IN_USER_ID,
		    A.IN_DATE,
		    A.UP_USER_ID,
		    A.UP_DATE
		FROM 
		    COMMUNITY A, 
		    (  SELECT
		            COMMUNITY_SEQ,
		            COUNT(*)  CNT
		        FROM
		            REPLY
		        GROUP BY 
		            COMMUNITY_SEQ) B
		WHERE
		    A.COMMUNITY_SEQ = B.COMMUNITY_SEQ
	</select>
	
	<select id="suserDetail" parameterType="hashMap" resultType="egovMap">
		SELECT 
			USER_ID,
			PWD,
			USER_NAME,
			MOBILE,
			EMAIL,
			BIRTH
		FROM 
			SUSER
		WHERE
			USER_ID = #{userId}
	</select>
	
	<insert id="suserInsert" parameterType="hashMap" >
		INSERT INTO SUSER(
			USER_ID,
			PWD,
			USER_NAME,
			MOBILE,
			EMAIL,
			
			BIRTH
			)
		VALUES(
			#{userId}, 
			#{pwd}, 
			#{userName},
			#{mobile}, 
			#{email},
			
			#{birth}
		)
	</insert>
	
	<update id="suserUpdate" parameterType="hashMap">
		UPDATE 
		    SUSER 
		SET
		    PWD = #{pwd}, 
		    USER_NAME = #{userName},
		    MOBILE = #{mobile}, 
		    EMAIL = #{email},
		    BIRTH = #{birth}
		WHERE
		    USER_ID = #{userId}
	</update>
	
	<delete id="suserDelete" parameterType="hashMap">
		DELETE 
		    SUSER 
		WHERE 
		    USER_ID = #{userId}
	</delete>
</mapper>