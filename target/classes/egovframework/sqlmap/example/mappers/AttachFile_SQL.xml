<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="kr.or.profit.mapper.AttachFileMapper">

    	<insert id="insertLessonFile" parameterType="fileVO">
	    <selectKey order="BEFORE" keyProperty="fileSeq" resultType="String">
			SELECT NVL(MAX(TO_NUMBER(FILE_SEQ)),0)+1 FROM ATTACH_FILE
		</selectKey>
		<![CDATA[
			INSERT INTO ATTACH_FILE
			(	FILE_SEQ,
				COMMUNITY_SEQ,
				MEMBER_ID,
				LESSON_DETAIL_SEQ,
				CHATTING_DETAIL_SEQ,
				PROCESS_SEQ,
				FILE_REAL_NAME,
				FILE_SAVE_NAME,
				FILE_PATH,
				IN_USER_ID,
				IN_DATE,
				UP_USER_ID,
				UP_DATE,
				LESSON_SEQ
			)
			VALUES (#{fileSeq, jdbcType=VARCHAR},
					#{communitySeq, jdbcType=VARCHAR},
					#{memberId, jdbcType=VARCHAR},
					#{lessonDetailSeq, jdbcType=VARCHAR},
					#{chattingDetailSeq, jdbcType=VARCHAR},
					#{processSeq, jdbcType=VARCHAR},
					#{fileRealName, jdbcType=VARCHAR},
					#{fileSaveName, jdbcType=VARCHAR},
					#{filePath, jdbcType=VARCHAR},
					1,
					to_char(sysdate, 'YYYYMMDD.HH24MISS'),
					1,
					to_char(sysdate, 'YYYYMMDD.HH24MISS'),
					#{lessonSeq, jdbcType=VARCHAR})
		]]>
	</insert>
	
    <update id="updateLessonFile" parameterType="fileVO">

<!-- 			UPDATE ATTACH_FILE -->
<!-- 			SET ID=#{id} -->
<!-- 				, NAME=#{name} -->
<!-- 				, DESCRIPTION=#{description} -->
<!-- 				, USE_YN=#{useYn} -->
<!-- 				  WHERE ID=#{id} -->

	</update>
   	
 
    
</mapper>
